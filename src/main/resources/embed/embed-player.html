<!doctype html>
<html>
<head>
<meta charset='UTF-8' />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>__TITLE__</title>
<link href="https://unpkg.com/video.js/dist/video-js.min.css" rel="stylesheet">
<script src="https://unpkg.com/video.js/dist/video.min.js"></script>
<script src="https://unpkg.com/videojs-contrib-hls.js"></script>
</head>
<body>
	<video id="player" class="video-js vjs-default-skin" 
		poster="https://steemitimages.com/400x400/https://ipfs.io/ipfs/__POSTERHASH__"
		style="object-fit: contain;">
		<source src="https://ipfs.io/ipfs/__VIDEOHASH__" type="video/mp4" />
		<source src="https://dporn.co/vidcache/__VIDEOHASH__" type="video/mp4" />
		<source src="https://gateway.ipfs.io/ipfs/__VIDEOHASH__" type="video/mp4" />
		<!-- Cloudflare doesn't handle "ranged" requests properly, use as last fallback -->
		<source src="https://cloudflare-ipfs.com/ipfs/__VIDEOHASH__" type="video/mp4" />
	</video>
	<script>
		var player = videojs('player', {"autoplay": false, "controls":true, "preload":"metadata", "loop":true}, function onPlayerReady(){
			console.log("Player Ready");
		});
		//simplistic fail over to next host on 404 errors		
		player.on('error', function(event) {
			try {
			console.log("ERROR: "+this.error().message);
			} catch(e) {
			}
			var sources = this.cache_.sources;
			sources.push(sources.shift()); //rotate
			//this.reset();
			this.src(sources);
		});
	</script>
</body>
</html>